<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Dynamax Helper</title>
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

<style>
  :root{
    --bg-light:#666769;
    --bg-dark:#1A252C;
    --card-light:#02491D;
    --card-dark:#023804;
    --button-bg:#F0F0F0;
    --toggle-light:#F0F0F0;
    --toggle-dark:#333333;
    --text-light:#0A0A0A;
    --text-dark:#F5F5F5;
    --glass:rgba(255,255,255,0.04);
  }

  html,body{
    height:100%;
    margin:0;
    font-family:Inter,system-ui,Arial,sans-serif;
    transition:background .25s,color .25s;
  }

  body{
    background:var(--bg-light);
    color:var(--text-dark);
  }
  body.dark{
    background:var(--bg-dark);
    color:var(--text-dark);
  }

  /* toggle button */
  .mode-toggle{
    position:fixed;
    top:14px;
    right:14px;
    z-index:1200;
    background:var(--toggle-light);
    color:#000;
    padding:8px 14px;
    border-radius:10px;
    cursor:pointer;
    box-shadow:0 6px 16px rgba(0,0,0,0.15);
    user-select:none;
    font-size:14px;
  }
  body.dark .mode-toggle{
    background:var(--toggle-dark);
    color:#F0F0F0;
  }

  /* loading */
  .loader{
    min-height:100vh;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    gap:16px;
    text-align:center;
  }
  .loader img.logo{
    width:200px;
    height:200px;
    border-radius:50%;
    object-fit:cover;
  }
  .loading-text{
    font-size:16px;
    color:#F0F0F0;
    opacity:0.85;
  }

  /* layout */
  .wrap{
    max-width:980px;
    margin:24px auto;
    padding:16px;
    display:flex;
    flex-direction:column;
    gap:18px;
  }

  .card{
    border-radius:14px;
    padding:18px;
    background:var(--card-light);
    color:#F0F0F0;
    box-shadow:0 10px 30px rgba(0,0,0,0.12);
    transition:transform .12s ease, box-shadow .12s ease;
  }
  body.dark .card{ background:var(--card-dark); }
  .card:hover{ transform:translateY(-3px); }

  h1{margin:0 0 12px;font-size:20px}
  label{display:block;margin:10px 0 6px;font-weight:600;color:#F0F0F0}

  select{
    width:100%;
    padding:10px 12px;
    border-radius:8px;
    border:none;
    font-size:15px;
    background:#F0F0F0;
    color:#000;
    box-sizing:border-box;
  }
  body.dark select{background:#000;color:#F0F0F0;}

  .controls{
    margin-top:10px;
    display:flex;
    gap:10px;
    flex-wrap:wrap;
  }
  .controls button{
    padding:10px 14px;
    border-radius:8px;
    border:none;
    background:var(--button-bg);
    color:#000;
    cursor:pointer;
  }

  .results{
    margin-top:12px;
    padding:12px;
    border-radius:10px;
    background:var(--glass);
  }

  pre.preserve{white-space:pre-wrap;margin:0;font-family:inherit}
  table{width:100%;border-collapse:collapse;font-size:14px}
  th,td{padding:8px;border-bottom:1px solid rgba(255,255,255,0.06)}
  th{position:sticky;top:0;background:rgba(0,0,0,0.1);z-index:2}
  .badge{display:inline-block;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,0.15);margin:4px;font-size:13px}
  .badge.highlight{background:#ff4444;color:#fff;font-weight:700}
  .cell-strong{background:#b42c2c}
  .cell-resist{background:#206699}
  .cell-immune{background:#444}
</style>
</head>

<body>

<!-- Dark Mode Toggle (hidden until app is loaded) -->
<div id="modeToggle" class="mode-toggle" style="display:none">ðŸŒ™ Dark Mode</div>

<!-- Loading Screen -->
<div id="loading" class="loader">
  <img class="logo" src="https://i.imgur.com/XZcfQzw.png" alt="Dynamax logo">
  <div class="loading-text">Loading...</div>
</div>

<!-- App -->
<div id="app" class="wrap" style="display:none;">
  <!-- HIER IST DEIN HAUPTTOOL â€“ UNVERÃ„NDERT -->
  <!-- (Inhalt identisch zu deiner Vorlage) -->
</div>

<script>
const $=id=>document.getElementById(id);

/* --- ALLE FUNKTIONEN UNVERÃ„NDERT --- */
/* dein kompletter bestehender JS-Code bleibt hier exakt gleich */
/* â€¦ gekÃ¼rzt aus PlatzgrÃ¼nden â€¦ */

/* Dark Mode Toggle */
const modeToggle=$('modeToggle');
function updateModeLabel(){
  modeToggle.textContent=document.body.classList.contains('dark')
    ?'â˜€ï¸ Light Mode':'ðŸŒ™ Dark Mode';
}
modeToggle.onclick=()=>{
  document.body.classList.toggle('dark');
  updateModeLabel();
};

/* Auto-Load beim Seitenstart */
window.addEventListener('DOMContentLoaded',()=>{
  loadAll();
});

/* Nach erfolgreichem Laden */
function loadAll(){
  Promise.all([
    parseCSV(URL_INFO).then(r=>{infoFields=r.fields;infoRows=r.data;}),
    parseCSV(URL_DB).then(r=>{dbFields=r.fields;dbRows=r.data;}),
    parseCSV(URL_MOVE).then(r=>{moveFields=r.fields;moveRows=r.data;}),
    parseCSV(URL_ATTACK).then(r=>{atkFields=r.fields;atkRows=r.data;})
  ]).then(()=>{
    $('loading').style.display='none';
    $('app').style.display='flex';
    $('modeToggle').style.display='block';
    updateModeLabel();
    populate();
  }).catch(e=>{
    console.error(e);
    $('loading').querySelector('.loading-text').textContent='Error loading data';
  });
}
</script>
</body>
</html>
